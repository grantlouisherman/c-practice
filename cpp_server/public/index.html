<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Markdown Note-Taking App</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #f0f2f5;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  h1 {
    margin-top: 30px;
    color: #333;
  }

  .note-container {
    margin-top: 20px;
    width: 600px;
    background-color: #fff;
    padding: 50px;
    box-shadow: 0px 2px 8px rgba(0,0,0,0.1);
    border-radius: 8px;
  }

  textarea {
    width: 100%;
    height: 100px;
    padding: 10px;
    font-size: 14px;
    border-radius: 4px;
    border: 1px solid #ccc;
    resize: vertical;
    font-family: monospace;
  }

  button {
    margin-top: 10px;
    width: 100%;
    padding: 10px;
    font-size: 16px;
    border: none;
    background-color: #4CAF50;
    color: white;
    border-radius: 4px;
    cursor: pointer;
  }

  button:hover {
    background-color: #45a049;
  }

  .notes {
    margin-top: 20px;
  }

  .note {
    background-color: #f9f9f9;
    padding: 12px;
    margin-bottom: 10px;
    border-radius: 4px;
    position: relative;
  }

  .note button.delete-btn {
    top: 8px;
    right: 8px;
    background-color: #e74c3c;
    color: white;
    border: none;
    border-radius: 3px;
    padding: 4px 8px;
    cursor: pointer;
    font-size: 12px;
  }

  .note button.delete-btn:hover {
    background-color: #c0392b;
  }

  /* Optional Markdown styling */
  .note h1, .note h2, .note h3 {
    margin: 5px 0;
  }
  .note pre {
    background: #eee;
    padding: 8px;
    border-radius: 4px;
    overflow-x: auto;
  }
  .note code {
    background: #eee;
    padding: 2px 4px;
    border-radius: 3px;
  }
</style>
</head>
<body>

<h1>Markdown Note-Taking App</h1>
<button id="savenotes">Save Notes</button>
<div class="note-container">
  <textarea id="noteInput" placeholder="Write your note in Markdown..."></textarea>
  <button id="submitBtn">Submit Note</button>
  <div id="noteList" class="notes"></div>
</div>

<!-- Marked.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script>

const button = document.getElementById("savenotes");

button.addEventListener("click", async () => {
  try {
    const res = await fetch("http://localhost:8088/hello");
    if (!res.ok) throw new Error(`HTTP error! Status: ${res.status}`);
    const text = await res.text();
  } catch (err) {
    console.error("Error: " + err);
  }
});

const noteInput = document.getElementById("noteInput");
const noteList = document.getElementById("noteList");
const submitBtn = document.getElementById("submitBtn");
const test_button = document.getElementById("test");

// Function to add a new note
function addNote() {
  const noteText = noteInput.value.trim();
  if (!noteText) return;

  const noteDiv = document.createElement("div");
  noteDiv.className = "note";
  noteDiv.innerHTML = marked.parse(noteText);

  // Create delete button
  const deleteBtn = document.createElement("button");
  deleteBtn.className = "delete-btn";
  deleteBtn.textContent = "Delete";
  deleteBtn.onclick = () => noteDiv.remove();

  noteDiv.appendChild(deleteBtn);
  noteList.prepend(noteDiv);

  noteInput.value = "";
}

// Attach submit button event
submitBtn.addEventListener("click", addNote);

// Optional: allow Enter+Shift to submit
noteInput.addEventListener("keydown", (e) => {
  if (e.key === "Enter" && !e.shiftKey) {
    e.preventDefault();
    addNote();
  }
});
</script>

</body>
</html>
